# Project 2: Priority-Based Scheduling

이 프로젝트는  xv6 운영체제에서 우선순위 기반 스케줄러를 구현하는 것입니다. 각 프로세스의 우선순위를 설정하고, 우선순위에 따라 스케줄링하는 기능을 추가합니다.

---

## 목차

- [프로젝트 개요](#프로젝트-개요)
- [프로세스 우선순위 시스템 콜](#프로세스-우선순위-시스템-콜)
- [우선순위 기반 스케줄러](#우선순위-기반-스케줄러)
- [테스트 프로그램](#테스트-프로그램)
- [참고 자료](#참고-자료)

---

## 프로젝트 개요

xv6 운영체제에서 프로세스 우선순위를 설정하고, 우선순위에 따라 CPU 스케줄링을 수행합니다. 낮은 `nice` 값일수록 높은 우선순위를 가지며, 동일한 우선순위일 경우 FIFO 방식으로 스케줄링됩니다.



## 프로세스 우선순위 시스템 콜

1. **setnice(int pid, int nice_value)**: 
   - 지정된 `pid`에 해당하는 프로세스의 `nice` 값을 설정합니다.
   - `nice_value`의 범위는 0에서 40까지이며, 기본값은 20입니다.
   - 성공 시 0을 반환하고, 잘못된 `pid` 또는 `nice_value`가 범위를 벗어날 경우 -1을 반환합니다.

2. **getnice(int pid)**: 
   - `pid`에 해당하는 프로세스의 `nice` 값을 반환합니다.
   - 잘못된 `pid`일 경우 -1을 반환합니다.

3. **ps(int pid)**: 
   - 프로세스의 정보를 출력합니다. `pid`가 0일 경우 모든 프로세스의 정보를 출력하고, 특정 `pid`에 해당하는 프로세스 정보만 출력할 수도 있습니다.
   - 출력 정보: `pid`, `ppid`, `nice`, `status`, `name`
   - 반환값이 없습니다.

이 시스템 콜들을 활용하여 프로세스 우선순위를 조정하고, `ps` 명령을 통해 프로세스 상태를 확인하는 사용자 프로그램 `minitop`을 작성합니다.



## 우선순위 기반 스케줄러

우선순위 기반 스케줄러를 구현하여, 우선순위가 높은 프로세스를 먼저 실행합니다. `setnice`를 통해 우선순위가 변경될 경우 즉시 스케줄러에 반영됩니다.

스케줄러는 다음과 같은 상황에서 호출됩니다:
1. 프로세스 종료 시 (`exit()`)
2. 프로세스가 슬립 상태에 들어갈 때 (`sleep()`)
3. 타이머 인터럽트 발생 시 (`yield()`)
4. 우선순위가 변경될 때 (`setnice` 호출)



## 테스트 프로그램

`minitop`이라는 사용자 프로그램을 작성하여 `ps` 시스템 콜을 통해 현재 프로세스 상태를 출력합니다. `minitop`을 통해 우선순위 스케줄링이 제대로 동작하는지 확인할 수 있습니다.


## 참고 자료

- xv6 소스 코드: [GitHub 링크](https://github.com/mit-pdos/xv6-public)
- xv6 해설서: [xv6 commentary PDF](https://pdos.csail.mit.edu/6.828/2018/xv6/book-rev11.pdf)
- xv6 관련 참고서적: [xv6 source booklet PDF](https://pdos.csail.mit.edu/6.828/2018/xv6/xv6-rev11.pdf)



